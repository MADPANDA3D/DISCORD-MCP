services:
  discord-mcp:
    container_name: discord-mcp
    build: .
    restart: unless-stopped
    environment:
      DISCORD_TOKEN: "${DISCORD_TOKEN}"
      DISCORD_GUILD_ID: "${DISCORD_GUILD_ID}"
      DISCORD_PRIMARY_CHANNEL_ID: "${DISCORD_PRIMARY_CHANNEL_ID:-1455591724532629627}"
      DISCORD_ALLOWED_CHANNEL_IDS: "${DISCORD_ALLOWED_CHANNEL_IDS:-1455591724532629627,1411052130709667850,1414768421584764958}"
      MCP_ADMIN_TOOLS_ENABLED: "${MCP_ADMIN_TOOLS_ENABLED:-true}"
      DISCORD_CHANNEL_CACHE_TTL_SECONDS: "${DISCORD_CHANNEL_CACHE_TTL_SECONDS:-600}"
    networks:
      - npm_default
    ports:
      - "8085:8085"

networks:
  npm_default:
    external: true
